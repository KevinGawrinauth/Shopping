<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Explore Categories - GreenGrocer</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" rel="stylesheet">
    <style>
            body {
                font-family: Arial, sans-serif;
                background-image: linear-gradient(rgba(255, 255, 255, 0.6), rgba(255, 255, 255, 0.6)), url('/static/img/veggie_background2.0.jpg');
                background-size: cover; /* Fills the viewport while keeping the image's aspect ratio */
                background-repeat: no-repeat;
                background-position: center;
                background-attachment: fixed; /* Keeps the background fixed during scrolling */
                color: #333;
            }
        .navbar {
            background-color: #fff;
            padding: 10px;
        }
        .navbar-brand img {
            width: 150px;
        }
        .nav-item .dropdown-toggle {
            color: #000;
            
        }
        .nav-item .dropdown-menu {
            background-color: white;
            
        }
        .search-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-left: 20px;
            width: 70%;
        }

        .search-bar input {
            width: 100%;
            padding: 8px;
            border: 1px solid #ccc;
            border-radius: 4px;
        }
    
    .location-dropdown {
        position: absolute;
        top: 45px;
        right: 250px; /* Adjust this to place it closer to the accessibility button */
        z-index: 1;
        width: 175px;
    }
    .accessibility-btn {
        background-color: #ffd700;
        color: #000;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        display: flex;
        justify-content: center;
        align-items: center;
        cursor: pointer;
    }
    .accessibility-btn img {
        width: 200px;
        height: 100px;
    }
        .category-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-around;
            padding: 0 20px;
        }
        .category-card {
            background-color: #d9d9d9;
            width: 180px;
            margin: 15px;
            text-align: center;
            border-radius: 10px;
            padding: 15px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            vertical-align: top;
            position: relative;
            display: inline-block;
            justify-content: space-between;
            align-items: center;
            text-decoration: none;
            -webkit-transition: all 0.7s cubic-bezier(0.165, 0.84, 0.44, 1);
            transition: all 0.5s cubic-bezier(0.165, 0.84, 0.44, 1);
            backface-visibility: hidden;
        }
        .category-card::after {
            position: absolute;
            z-index: -1;
            width: 50%;
            height: 100%;
            border-radius: 5px;
            box-shadow: 0 8px 18px rgba(0,0,0,0.3);
            opacity: 0.5;
            transition: opacity 0.3s ease-in-out;
        }
        .category-card:hover {
            transform: scale(1.05,1.05);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2); 
            transition: transform 0.3s ease-in-out;
        }
        .category-card:hover::after {
            box-shadow: 0 12px 24px rgba(0, 0, 0, 0.4); 
            opacity: 1;
            transition: opacity 0.3s ease-in-out, box-shadow 0.3s ease-in-out;
        }
        .category-card img {
            width: 130px;
            height: 100px;
            object-fit: cover;
            margin-bottom: 10px;
        }
        .category-card h4 {
            font-size: 16px;
            color: #333;
            margin-bottom: 5px;
        }
        .category-card p {
            color: #666;
        }
        .category-card:hover h4, .category-card:hover p {
            transform: scale(1.05);
            transition: transform 0.5s ease-in-out;
        }
        .category-card:hover img {
            transform: scale(1.05);
            transition: transform 0.5s ease-in-out;
        }
        .category-card h4, .category-card p, .category-card img {
            transition: transform 0.3s ease-in-out;
        }
        .bottom-nav {
            position: fixed;
            bottom: 0;
            width: 100%;
            background-color: #f8f9fa;
            box-shadow: 0 -1px 10px rgba(0, 0, 0, 0.1);
            display: flex;
            justify-content: space-around;
            padding: 10px 0;
            z-index: 1000;
        }
        .nav-item {
            flex-grow: 1;
            text-align: center;
            right: -75px;
        }
        .nav-item a {
            text-decoration: none;
            color: #000;
            font-weight: bold;
            display: flex;
            flex-direction: column;
            align-items: center;
            width: auto;
            padding: 5px 0;
            margin: 0 100px;
            box-sizing: border-box;
        }
        .nav-item a:visited {
            color: #000;
        }
        .nav-icon {
            width: 50px;
            height: 50px;
            border-radius: 10px;
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 5px;
            background-color: #f8f9fa;
        }
        .nav-item img {
            width: 30px;
            height: 30px;
        }
        .nav-item span {
            font-size: 14px;
        }
        .nav-item a:hover .nav-icon {
            background-color: #28a745;
        }
        .nav-item a:hover img {
            filter: brightness(0) invert(1);
        }
        .nav-item a:hover {
            color: #000;
        }

    /* Show bottom-nav when hovering */
    .bottom-nav:hover {
        transform: translateY(0); /* Slide up into view */
    }
    


    </style>
</head>
{% include 'topheader.html' %}
<body>
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <!-- commented out the previous index top header because location changing was a problem
     Navbar with custom dropdown inside the search bar 
    <nav class="navbar d-flex justify-content-between align-items-center">
        <div class="navbar-brand">
            <a href="{{ url_for('home') }}">
                <img src="/static/img/GreenGrocer.png" alt="GreenGrocer Logo" style="width: 250px; height: auto;">
            </a>
        </div>

        <div class="search-bar" style="display: flex; align-items: center; max-width: 50%;">
            <div class="input-group" style="width: 900px;">
                <div class="input-group-prepend">
                    <button class="btn btn-success dropdown-toggle" type="button" id="categoryDropdownButton" data-bs-toggle="dropdown" aria-expanded="false" style="border-radius: 5px 0 0 5px;">
                        All Categories
                    </button>
                    <ul class="dropdown-menu" aria-labelledby="categoryDropdownButton">
                        <li><a class="dropdown-item" href="#" onclick="selectCategory('All Categories')">All Categories</a></li>
                        <li><a class="dropdown-item" href="#" onclick="selectCategory('Vegetables')">Vegetables</a></li>
                        <li><a class="dropdown-item" href="#" onclick="selectCategory('Fruits')">Fruits</a></li>
                        <li><a class="dropdown-item" href="#" onclick="selectCategory('Meats')">Meats</a></li>
                        <li><a class="dropdown-item" href="#" onclick="selectCategory('Frozen')">Frozen</a></li>
                        <li><a class="dropdown-item" href="#" onclick="selectCategory('Dairy')">Dairy</a></li>
                        <li><a class="dropdown-item" href="#" onclick="selectCategory('Bread')">Bread</a></li>
                        <li><a class="dropdown-item" href="#" onclick="selectCategory('Canned')">Canned</a></li>
                        <li><a class="dropdown-item" href="#" onclick="selectCategory('Snacks')">Snacks</a></li>
                        <li><a class="dropdown-item" href="#" onclick="selectCategory('Drinks')">Drinks</a></li>
                        <li><a class="dropdown-item" href="#" onclick="selectCategory('Personal Care')">Personal Care</a></li>
                    </ul>
                </div>
                <input type="text" id="searchInput" class="form-control" placeholder="Search for items..." aria-label="Search for items" style="width: 200px;">
                <button class="btn btn-success" style="padding: 10px 20px; border-radius: 0 5px 5px 0;" onclick="searchItems()">
                    <i class="fas fa-search" style="color: white; font-size: 16px;"></i>
                </button>
            </div>
        </div>

    
        <div class="nav-item dropdown ms-3">
            <a class="dropdown-toggle" href="#" role="button" id="dropdownMenuLink" data-bs-toggle="dropdown" aria-expanded="false"> 
                {{ username }}
            </a>
            <ul class="dropdown-menu" aria-labelledby="dropdownMenuLink">
                <li><a class="dropdown-item" href="{{ url_for('settings') }}">Settings</a></li>
                <li><a class="dropdown-item" href="{{ url_for('account_info') }}">Account Information</a></li>
                <li><a class="dropdown-item" href="{{ url_for('orderhistory') }}">Order History</a></li>
                <li><a class="dropdown-item" href="{{ url_for('loyalty_rewards') }}">Loyalty and Rewards</a></li>
                <li><a class="dropdown-item" href="{{ url_for('faq') }}">FAQ</a></li>
                <form action="{{ url_for('logout') }}" method="POST" class="signout-btn d-flex">
                    <button class="dropdown-item w-100 text-start" type="submit">Sign Out</button>
                </form>
            </ul>
        </div>

     
        <div class="accessibility-btn" style="width: 30px; height: 30px;">
            <img src="/static/img/AccessabilityButton.png" alt="Accessibility Icon" style="width: 50px; height: 50px;">
        </div>
        

  
        <div class="location-dropdown">
            <select id="locationDropdown" class="form-select form-select-sm" onchange="changeLocation()">
                <option value="">Select Location</option>
                {% for location in locations %}
                    <option value="{{ location['locationId'] }}">
                        {{ location['name'] }} - {{ location['address']['city'] }}
                    </option>
                {% endfor %}
            </select>
        </div>
    </nav>

<script>
    function changeLocation() {
        const locationDropdown = document.getElementById("locationDropdown");
        const locationId = locationDropdown.value;
        
        if (locationId) {
            // Store the selected location ID in sessionStorage
            sessionStorage.setItem("selectedLocationId", locationId);
            
            // Redirect to set the location
            window.location.href = `/set_location?location_id=${locationId}`;
        }
    }

    // When the page loads, set the dropdown to the stored location
    document.addEventListener("DOMContentLoaded", function() {
        const locationDropdown = document.getElementById("locationDropdown");
        const savedLocationId = sessionStorage.getItem("selectedLocationId");

        if (savedLocationId) {
            locationDropdown.value = savedLocationId;
        }
    });
</script>
-->

    <!-- JavaScript to handle the search functionality -->
    <script>
        let selectedCategory = 'All Categories';

        function selectCategory(category) {
            selectedCategory = category;
            document.getElementById('categoryDropdownButton').textContent = category;
        }

        function searchItems() {
            const query = document.getElementById('searchInput').value.toLowerCase();

            const productMapping = {
                "chicken": "Meats", "beef": "Meats", "pork": "Meats", "turkey": "Meats", "bacon": "Meats", "lamb": "Meats",
                "apple": "Fruits", "banana": "Fruits", "orange": "Fruits", "grape": "Fruits", "pineapple": "Fruits",
                "carrot": "Vegetables", "broccoli": "Vegetables", "lettuce": "Vegetables", "spinach": "Vegetables",
                "milk": "Dairy", "cheese": "Dairy", "yogurt": "Dairy", "butter": "Dairy", "cream": "Dairy", "eggs": "Dairy",
                "bread": "Bread", "bagel": "Bread", "bun": "Bread", "croissant": "Bread", "muffin": "Bread", "roll": "Bread",
                "soda": "Drinks", "coffee": "Drinks", "tea": "Drinks", "juice": "Drinks", "water": "Drinks", "smoothie": "Drinks",
                "ice cream": "Frozen", "frozen pizza": "Frozen", "frozen vegetables": "Frozen", "frozen fries": "Frozen",
                "beans": "Canned", "canned soup": "Canned", "canned tomatoes": "Canned", "canned corn": "Canned",
                "chips": "Snacks", "cookies": "Snacks", "popcorn": "Snacks", "crackers": "Snacks", "pretzels": "Snacks",
                "shampoo": "Personal Care", "toothpaste": "Personal Care", "soap": "Personal Care", "lotion": "Personal Care"
            };

            const mappedCategory = productMapping[query];

            if (mappedCategory) {
                if (selectedCategory === 'All Categories' || selectedCategory === mappedCategory) {
                    window.location.href = `/products/${mappedCategory}?query=${query}`;
                } else {
                    alert(`"${query}" is not available in the selected category "${selectedCategory}".`);
                }
            } else {
                alert("No items found for the entered product name.");
            }
        }
    </script>

    <div class="container mt-5">
        <h2 class="text-center">Explore Categories</h2>
        <div class="category-container">
            <a href="/products/Vegetables" class="category-card">
                <img src="/static/img/vegetables.png" style="height: 160px;" alt="Vegetables">
                <h4>Vegetables</h4>
            </a>
            <a href="/products/Meats" class="category-card">
                <img src="/static/img/meats.png" style="height: 150px; width: 150px; margin-bottom: 18px;" alt="Meats">
                <h4>Meats</h4>
            </a>
            <a href="/products/Fruits" class="category-card">
                <img src="/static/img/fruits.png" style="width: 150px; height: 120px; margin-bottom: 48px;" alt="Fruits">
                <h4>Fruits</h4>
            </a>
            <a href="/products/Drinks" class="category-card">
                <img src="/static/img/drinks.png" style="height: 150px; width: 150px; margin-bottom: 18px;" alt="Drinks">
                <h4>Drinks</h4>
            </a>
            <a href="/products/Frozen" class="category-card">
                <img src="/static/img/frozen.png" style="width: 160px; height: 140px; margin-bottom: 28px;" alt="Frozen">
                <h4>Frozen</h4>
            </a>
        </div>

        <div class="category-container">
            <a href="/products/Dairy" class="category-card">
                <img src="/static/img/milk.png" style="width: 150px; height: 150px;" alt="Dairy">
                <h4>Dairy</h4>
            </a>
            <a href="/products/Bread" class="category-card">
                <img src="/static/img/bread.png" style="width: 150px; height: 120px; margin-bottom: 23px; margin-top: 15px;" alt="Bread">
                <h4>Bread</h4>
            </a>
            <a href="/products/Canned" class="category-card">
                <img src="/static/img/canned_foods.png" style="width: 160px; height: 130px; margin-bottom: 28px;" alt="Canned Foods">
                <h4>Canned Foods</h4>
            </a>
            <a href="/products/Snacks" class="category-card">
                <img src="/static/img/snacks.png" style="width: 160px; height: 130px; margin-bottom: 28px;" alt="Snacks">
                <h4>Snacks</h4>
            </a>
            <a href="/products/PersonalCare" class="category-card">
                <img src="/static/img/personalcare.png" style="width: 140px; height: 120px; margin-bottom: 35px;" alt="Personal Care">
                <h4>Personal Care</h4>
            </a>
        </div>
    </div>
    {% include 'footer.html' %}
    
    
    

   <!-- Bottom Navigation -->
   <div class="bottom-nav" id="bottomNav">
    <div class="nav-item">
        <a href="{{ url_for('home') }}">
            <div class="nav-icon nav-home">
                <img src="https://img.icons8.com/ios-filled/50/000000/home.png" alt="Home Icon" />
            </div>
            <span>Home</span>
        </a>
    </div>
    <div class="nav-item">
        <a href="{{ url_for('view_favorites') }}">
            <div class="nav-icon nav-favorites">
                <img src="https://img.icons8.com/ios-filled/50/000000/star--v1.png" alt="Favorites Icon" />
            </div>
            <span>Favorites</span>
        </a>
    </div>
    <div class="nav-item">
        <a href="{{ url_for('discounts') }}">
            <div class="nav-icon nav-discounts">
                <img src="https://img.icons8.com/ios-filled/50/000000/discount.png" alt="Discounts Icon" />
            </div>
            <span>Discounts</span>
        </a>
    </div>
    <div class="nav-item">
        <a href="{{ url_for('view_cart') }}">
            <div class="nav-icon nav-cart">
                <img src="https://img.icons8.com/ios-filled/50/000000/shopping-cart.png" alt="Cart Icon" />
            </div>
            <span>Cart ({{ cart_count }})</span>
        </a>
    </div>
</div>

<!-- Scroll Detection Script -->
<script>
    let lastScrollTop = window.pageYOffset || document.documentElement.scrollTop;

    window.addEventListener("scroll", function () {
        const bottomNav = document.getElementById("bottomNav");
        const currentScroll = window.pageYOffset || document.documentElement.scrollTop;

        // Show navbar when scrolling up, hide when scrolling down
        if (currentScroll > lastScrollTop) {
            bottomNav.style.transform = "translateY(100%)"; // Hide nav when scrolling down
        } else {
            bottomNav.style.transform = "translateY(0)"; // Show nav when scrolling up
        }
        lastScrollTop = currentScroll <= 0 ? 0 : currentScroll; // Update scroll position
    });
</script>

</body>

</html>